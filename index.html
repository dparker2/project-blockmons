<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Location-based AR.js demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
        #location-debug {
            position: absolute;
            top: 0;
            left: 0;
            background-color: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>

<body style="margin: 0; overflow: hidden;">
    <script>
        window.onload = () => {
            var firstLoc = true;
            var latitudeDebugContainer = document.getElementById("latitude-debug");
            var longitudeDebugContainer = document.getElementById("longitude-debug");
            var creatureEl = document.getElementById("not-pokemon");

            window.addEventListener("gps-camera-update-position", e => {
                latitudeDebugContainer.innerText = "Latitude: " + e.detail.position.latitude;
                longitudeDebugContainer.innerText = "Longitude: " + e.detail.position.longitude;
                if (firstLoc) {
                    firstLoc = false;
                    creatureEl.setAttribute('gps-projected-entity-place', {
                        latitude: e.detail.position.latitude,
                        longitude: e.detail.position.longitude - 0.003
                    });
                }
            });
        };
    </script>
    <div id="location-debug">
        <div id="latitude-debug">Latitude: </div>
        <div id="longitude-debug">Longitude: </div>
    </div>
    <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- <a-assets>
            <img id="not-pokemon-img" src="assets/notZubat.gif">
        </a-assets>
        <a-image id="not-pokemon" src="#not-pokemon-img" scale="3 3 3" look-at="[gps-projected-camera]">
        </a-image>
        <a-cube position="0 0 1" material="color: red" scale="5 5 5"></a-cube>
        <a-camera gps-projected-camera rotation-reader look-controls-enabled='false'
            arjs-look-controls='smoothingFactor: 0.1' gps-camera='gpsMinDistance: 10'> </a-camera> -->
        <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
        <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
        <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
        <a-camera></a-camera>
    </a-scene>
</body>

</html>